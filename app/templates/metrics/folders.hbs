{{page-title 'Folders'}}
{{log this.selectedProblem}}
<header>
  <h3>Search by Folder</h3>
</header>
<div class='metrics__container'>
  <Input
    type='text'
    @placeholder='Search by folder name'
    @value={{this.searchTerm}}
  />
  <button {{on 'click' this.searchFoldersByName}}>Search Folders</button>
  <TwitterTypeahead @placeholder="Search by problem" @dataList={{this.model.problems}} @optionLabelPath="title"
    @selectedValue={{this.selectedProblem}} @setSelectedValueOnChange={{true}} />
  <div class='metrics--scrollable'>
    <ul>
      {{#each this.foundFolders as |folder|}}
        <li><label><Input
              type='checkbox'
              {{on 'change' (fn this.updateSelectedFolders folder)}}
            />{{if folder.cleanSelections.length '*'}}{{folder.name}}
            -
            {{folder.createdBy.displayName}}</label></li>
      {{/each}}
    </ul>
  </div>
  {{#if this.selectedFolders}}
    <EmberTable as |t|>
      <t.head
        @columns={{this.tableColumns}}
        @scrollIndicators='all'
        @widthConstraint='eq-container'
      />
      <t.body @rows={{this.tableRows}} as |b| />
    </EmberTable>
  {{/if}}
</div>