{{#link-to "index"}}
  <h1 id="encompass-logo" class="al_logo">Drexel | EnCoMPASS</h1>
{{/link-to}}

<div class="clear_r"></div>

{{#if user.isAuthenticated}}
  <nav class="al_nav menu-toggle">
      <ul id="main-nav">
        <span id="menu-items">
          <li id="home-btn">
            <div class="dropdown-skinny">
              {{#link-to "index" }}my work{{/link-to}}
            </div>
          </li>
          {{#unless currentUser.isStudent}}
            <li>
              <div class="dropdown dropdown-skinny">
                {{#link-to "index" }}
                  make
                  <i class="fa fa-caret-down caret-down"></i>
                {{/link-to}}
                <div class="dropdown-content">
                  {{#link-to "assignments.new" }}
                    assignment
                  {{/link-to}}
                  <div class="parent-dropdown">
                    <div class="dropdown dropdown-skinny">
                      {{#link-to "workspaces.new" }}
                        workspace
                        <i class="fa fa-caret-right caret-right spacing"></i>
                      {{/link-to}}
                    </div>
                    <div
                      id="dropdown-hidden"
                      class="dropdown-content dropdown-right dropdown-hidden"
                    >
                      {{#link-to "workspaces.new" }}
                        new
                      {{/link-to}}
                      {{#link-to "import" }}
                        import
                      {{/link-to}}
                      {{#link-to "workspaces.copy" }}
                        copy
                      {{/link-to}}
                      {{#link-to "vmt.import" }}
                        vmt
                      {{/link-to}}
                    </div>
                  </div>
                  {{#link-to "problems.new" }}
                    problem
                  {{/link-to}}
                  {{#link-to "sections.new" }}
                    class
                  {{/link-to}}
                  {{#link-to "users.new" }}
                    users
                  {{/link-to}}
                </div>
              </div>
            </li>
          {{/unless}}
          <li>
            <div class="dropdown dropdown-wide">
              {{#link-to "index" }}
                do
                <i class="fa fa-caret-down caret-down"></i>
              {{/link-to}}
              <div class="dropdown-content">
                {{#link-to "assignments" }}
                  solve a problem
                {{/link-to}}
                {{#link-to "workspaces" }}
                  review submitted work
                {{/link-to}}
                {{#link-to "responses" }}
                  mentor submissions
                {{/link-to}}
                {{#unless currentUser.isStudent}}
                  {{#link-to "sections" }}
                    manage classes
                  {{/link-to}}
                  {{#link-to "users" }}manage users{{/link-to}}
                {{/unless}}
              </div>
            </div>
          </li>
          <li>
            <div class="dropdown dropdown-skinny">
              {{#link-to "index" }}
                find
                <i class="fa fa-caret-down caret-down"></i>
              {{/link-to}}
              <div class="dropdown-content">
                {{#link-to "assignments" }}
                  assignment
                {{/link-to}}
                {{#link-to "workspaces" }}
                  workspace
                {{/link-to}}
                {{#link-to "problems" }}
                  problem
                {{/link-to}}
                {{#link-to "sections.home" }}
                  class
                {{/link-to}}
                {{#unless currentUser.isStudent}}
                  {{#link-to "users" }}
                    users
                  {{/link-to}}
                {{/unless}}
              </div>
            </div>
          </li>
          <li id="logout-btn">
            {{#link-to "logout" classNames="menu logout"}}
              <i class="fas fa-power-off logout-icon"></i>
              <span id="logout-text">log out</span>
            {{/link-to}}
          </li>
        </span>
        {{#unless isStudentAccount}}
          <li id="role-toggle">
            <span class="acting-role">Role: {{user.actingRoleName}}</span>
            <span class="toggle-role" {{action "showToggleModal"}}>
              <i class="fas fa-sync-alt"></i>
            </span>
          </li>
        {{/unless}}
        <li id="current-username">
          {{#link-to "user" currentUser.username}}
            <img
              src={{currentUser.avatar}}
              alt={{currentUser.username}}
            />
          {{/link-to}}
        </li>
        <li id="user-image">
          <img id="menu-button" src={{user.avatar}} alt="" />
          {{#if newNotifications}}
            {{circle-ntf displayCount=newNotifications.length}}
          {{/if}}
        </li>
      </ul>
  </nav>

  <div id="hide-menu" class="hidden animated">
    <ul>
      <li>
        {{#link-to "index"}}home{{/link-to}}
      </li>
      <li>
        {{#link-to "assignments.home"}}assignments{{/link-to}}
      </li>
      {{#unless currentUser.isStudent}}
        <li>
          {{#link-to "problems"}}problems{{/link-to}}
        </li>
      {{/unless}}
      <li>
        {{#link-to "sections.home"}}classes{{/link-to}}
      </li>
      <li>
        {{#link-to "workspaces"}}workspaces{{/link-to}}
      </li>
      {{#unless currentUser.isStudent}}
        <li>
          {{#link-to "import"}}import{{/link-to}}
        </li>
      {{/unless}}
      <li>
        {{#link-to "responses"}}responses{{/link-to}}
        {{#if responseNotifications}}
          {{circle-ntf displayCount=responseNotifications.length}}
        {{/if}}
      </li>
      {{#unless currentUser.isStudent}}
        <li>
          {{#link-to "users.home"}}users{{/link-to}}
        </li>
      {{/unless}}
      <li id="logout-btn-side">
        {{#link-to "logout"}}logout{{/link-to}}
      </li>
    </ul>
  </div>

{{else}}
  <nav id="topbar-unauth">
    <ul>
      <li data-test="login">
        {{#link-to "auth.login" classNames="menu login hidden" }}
          log in
        {{/link-to}}
      </li>
      <li data-test="signup">
        {{#link-to "auth.signup" classNames="menu signup" }}
          sign up
        {{/link-to}}
      </li>
    </ul>
  </nav>
{{/if}}

<script>
  $('#menu-button').click(function (e) { 
    e.stopPropagation();
    $('#hide-menu').toggleClass('sidemenu-style');
    $('#hide-menu').addClass('slideInRight'); 
    }); 
  $('#hide-menu').click(function(e) { 
    e.stopPropagation(); 
  }); 
  $('body,html').click(function (e) {
    $('#hide-menu').removeClass('sidemenu-style'); 
  });
  $('#hide-menu>li>a').ready(() => { 
    $('#hide-menu').click(function (e) {
      $('#hide-menu').removeClass('sidemenu-style'); 
    }); 
  })
</script>